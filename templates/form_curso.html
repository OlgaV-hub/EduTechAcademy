{% extends "base.html" %}
{% block title %}{{ 'Editar curso' if curso else 'Nuevo curso' }}{% endblock %}

{% block content %}
<h1 class="mb-4">
    {{ 'Editar curso' if curso else 'Crear nuevo curso' }}
</h1>

<form action="{{ url_for('editar_curso', course_id=curso.id) if curso else url_for('agregar_curso') }}"
      method="post"
      enctype="multipart/form-data">

  <div class="mb-3">
    <label for="nombre" class="form-label">Nombre</label>
    <input type="text" class="form-control" id="nombre" name="nombre"
           value="{{ curso.nombre if curso else '' }}" required>
  </div>

  <div class="mb-3">
    <label for="descripcion" class="form-label">Descripci√≥n</label>
    <textarea class="form-control" id="descripcion" name="descripcion" rows="3">{{ curso.descripcion if curso else '' }}</textarea>
  </div>

  <div class="mb-3">
    <label for="precio" class="form-label">Precio (USD)</label>
    <input type="number" step="0.01" class="form-control" id="precio" name="precio"
           value="{{ curso.precio if curso else '' }}">
  </div>

  <!-- NUEVO: campo para imagen -->
  <div class="mb-3">
    <label for="imagen" class="form-label">Imagen del curso (opcional)</label>
    <input class="form-control" type="file" id="imagen" name="imagen" accept="image/*">
  </div>

  {% if curso and curso.image_key %}
    <div class="mb-3">
      <p>Imagen actual:</p>
      <img src="{{ url_publica(curso.image_key) }}"
           alt="Imagen del curso"
           class="img-thumbnail"
           style="max-width: 300px;">
    </div>
  {% endif %}

  <button type="submit" class="btn btn-primary">
    {{ 'Guardar cambios' if curso else 'Crear curso' }}
  </button>
  <a href="{{ url_for('listar_cursos') }}" class="btn btn-secondary ms-2">Cancelar</a>
</form>
{% endblock %}